%\documentclass[twoside,a4paper,ngerman, german,12pt,authoryear,openright]{book}
%\documentclass[twoside,english,12pt,authoryear,openright]{book}
\documentclass[twoside,12pt,authoryear,openright]{book}

!en \usepackage[english]{babel} 
!de \usepackage[ngerman]{babel} 

\usepackage{geometry} % see geometry.pdf on how to lay out the page. There's lots.
\geometry{a4paper} % or letter or a5paper or ... etc

\usepackage{graphicx}
\usepackage{caption}
\usepackage{subcaption}

% border around all figures
%\usepackage{float}
%\floatstyle{boxed} 
%\restylefloat{figure}

\usepackage{epstopdf}
\usepackage{pslatex}
\usepackage[utf8]{inputenc} 
\usepackage[T1]{fontenc}
\usepackage{a4wide}
\usepackage{fancyhdr}
\usepackage{bookmark}


\usepackage{listings}
\usepackage{courier}
\usepackage{color}
\lstset{
         basicstyle=\scriptsize\ttfamily,         % Standardschrift
%         numbers=left,                           % Ort der Zeilennummern
         numberstyle=\tiny,                       % Stil der Zeilennummern
%         stepnumber=2,                           % Abstand zwischen den Zeilennummern
         numbersep=5pt,                           % Abstand der Nummern zum Text
         tabsize=4,                               % Groesse von Tabs
         extendedchars=true,                      %
%         breaklines=true,                        % Zeilen werden Umgebrochen
%         keywordstyle=\color{blue}\textbf,
         keywordstyle=\ttfamily,
%         frame=tblr,         
 %        keywordstyle=[1]\textbf,                % Stil der Keywords
 %        keywordstyle=[2]\textbf,                %
 %        keywordstyle=[3]\textbf,                %
 %        keywordstyle=[4]\textbf, \sqrt{\sqrt{}} %
%         stringstyle=\color{white}\ttfamily,     % Farbe der String
         showspaces=false,                        % Leerzeichen anzeigen ?
         showtabs=false,                          % Tabs anzeigen ?
         xleftmargin=17pt,
         framextopmargin=17pt,
%         framexleftmargin=17pt,
         framexleftmargin=3pt,
         framexrightmargin=5pt,
         framexbottommargin=4pt,
%         backgroundcolor=\color{lightgray},
         showstringspaces=true                    % Leerzeichen in Strings anzeigen ?        
 }
\lstset{language=C++}

\usepackage{hyperref}

!en \selectlanguage{english}
!de \selectlanguage{ngerman}

\pagestyle{fancy}
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}
\setlength\parskip{\medskipamount}
\setlength\parindent{0pt}

\makeatletter
\makeatother

\newcommand{\at}{\textit{ATmega8}}

\begin{document}
\inputencoding{utf8}

!en \title{Cookbook for Assembly Programming with Arduino and plain 8bit Atmel AVR Micro Controllers}
!de \title{Assemblerkochbuch für Arduino und Atmel AVR Micro Controller}

\author{Felix Morgner and Manfred Morgner}


\maketitle

!en This book is a living piece of work, so if you spot any errors don't hesitate to contact us so we can try to fix them. We are always happy if someone helps us to improve the book, shows us new ways of doing stuff, creates better explanations, throws in faster solutions, cleans up errors ... basically we are happy about everything that helps in the creation of the best cookbook of all time.

!de Dieses Buch ist ein lebendes Werk. Wenn Du Fehler findest kannst Du uns kontaktieren, wir versuchen dann, die Beule auszubeulen. Wir freuen und immer, wenn uns jemand hilft, unser Buch zu verbessern, uns bessere Wege zeigt, verständlichere Beschreibungen demonstriert, schnellere Lösungen einbringt, Fehler beseitigt ... was immer nötig ist um das beste Kochbuch aller Zeiten zu entwickeln.


!en We are going to try to keep the descriptions short while expanding them if requested. This way we can concentrate on the important stuff, we ever that is.

!de Wir werden versuchen, die Beschreibungen kurz zu halten und im Fall von Nachfragen auszubauen. Auf diese Weise können wir uns auf das Wesentliche konzentrieren, was immer das ist.



!en If you want to work along with this book, we suggest getting a copy of the ,ATMEL 8bit AVR instruction set manual':

!de Wenn Du mit diesem Buch arbeiten willst, empfehlen wir mindestens die folgende Dokumentation herunter zu laden ,ATMEL 8bit AVR instruction set manual':

\url{http://www.atmel.com/dyn/resources/prod_documents/doc0856.pdf}



!en We are not going to explain the basics of the instructions used since this would be way beyond the scope of this book and it's already been done in the documentation mentioned above. We are, however, going to explain why we use specific instructions if there are alternatives. Also, we are going to describe specific properties of an instruction if needed.

!de In diesem Buch werden wir die verwendeten Befehle nicht grundlegend erklären. Diese Erläuterungen liegen bereits in der o.g. Dokumentation vor. Natürlich werden wir erläutern wieso wir bestimmte Befehle einsetzen wenn es, im Rahmen des Buches, offensichtliche Alternativen gibt oder bestimmte Spezifika beschreiben sofern es für das Verständnis einer Situation erforderlich ist.



!en This book uses the \at as much as possible to keep the code snippets simple. We don't want to lose ourselves in the specifics of different microcontrollers and we don't want to increase code complexity beyond what's needed.

!de Dieses Buch verwendet für die Umsetzung entweder durchgehend oder überwiegend \at. Diese Einschränkung dient der Vereinfachung der Codebeispiele. Wir wollen und nicht in den Spezifika der Micro Controller Modelle verlieren und unnötig komplexen Quelltext produzieren.



!en One of our goals with this book is, to show what can be achieved with even small microcontrollers. Of course we're aware of the existance of larger and more powerfull devices and that they are readily available for about the same price. However, we believe that it much more impressive to handle a large problem, using a small controller. Take for example the creation of a musical instrument using an \at, some wires and a couple of resistors. Moreover, it can come in pretty handy to know whats at the core, if you're working on a larger project, and assembly-language programms are the core of programming.  

!de Es geht uns auch darum zu zeigen, was bereits mit kleinen Micro Controllern erreicht werden kann. Es ist uns klar, dass grössere, schnellere Micro Controller für ähnliche Preise angeboten werden. Wir sind allerdings der Meinung, dass es viel eindrücklicher ist, mit einem sehr kleinen Micro Controller eine überraschend grosse Aufgabe zu lösen, wie zum Beispiel ein Musikinstrument aus einem \at ein paar Drähten und ein paar Widerständen. Darüber hinaus ist es auch in grösseren Projekten mit umfangreicheren Ressourcen hilfreich zu wissen, worauf es im Kern der Sache ankommt. Und Assemblerprogramme sind notgedrungen in jedem Fall der Kern der Programmierung.



!en This book is all about assembly programming. We don't believe that assembly programms will save the world, even if it's easier to save the world if you are programming in assembly ;-). Every programming language has it's reasons and some of them are even sensible. As a reader of this book, you wan't to learn assembly programming by examples and you like to experiment with real hardware. We try to serve this group of readers by keeping the circuits simple and the cost low.

!de Dieses Buch dreht sich um Assemblerprogrammierung. Wir glauben nicht, das Assemblerprogramme die Welt retten werden. Auch wenn es einfacher ist, die Welt zu retten wenn man in Assembler programmiert ;-). Jede Programmiersprache hat ihren Zweck und manche sind sogar sinnvoll. Der Leser dieses Buches möchte Assemblerprogrammierung anhand von Beispielen erlernen und experimentiert gern mit echter Hardware. Wir versuchen diese Lesergruppe zu bedienen indem wir versuchen, die Schaltungen einfach zu halten und die Kosten dafür niedrig.

\tableofcontents{}
\listoffigures{}
\listoftables{}


!en \part{Simple Samples}
!de \part{Einfache Beispiele}


!en \chapter{Light}
!de \chapter{Licht}



!en X

!de In diesem Kapitel demonstrieren wir die Grundlagen der Assemblerprogrammierung mit AVR Micro Controllern. In den Beispielen werden wir nur das Mindeste an Hardware verwenden. Für die ersten Beispiele benötigen wir lediglich ein Stück Draht und einen mit Strom versorgten Arduino Uno.


\begin{figure}[htbp]
  \centering
  \includegraphics[width=120mm]{Media/www-arduino-cc_ArduinoUnoFront.jpeg}
  \caption{Arduino Uno}
  \label{ArduinoUnoFront}
\end{figure}


\begin{figure}[htbp]
  \centering
  \includegraphics[width=120mm]{LED/S000_let-there-be-light/schema_circuit.png}
!en  \caption{Light - Schema}
!de  \caption{'Licht' Schaltplan}
  \label{atmega8-let-there-be-light-schema}
\end{figure}



!en X

!de Du kannst auch Deine eigene Schaltung aufbauen, wie in Abbildung \ref{atmega8-get-me-on-get-me-off-schema} auf Seite \pageref{atmega8-get-me-on-get-me-off-schema} gezeigt. Das Breadboard Layout kannst Du der Datei \texttt{LED/S000\_LED-Basic-Circuit.fz} entnehmen, eine Fritzing-Datei.



!en X

!de Wir konzentrieren uns darauf, nach Möglichkeit 'Freie und Open Source Software' zu verwenden. Aller Programmcode, den wir hier zeigen ist Freie Software. Das Buch und alles darin ist so frei wie es uns erlaubt wird es zu machen.



!en X

!de Ausserdem versuchen wir zu vermeiden 'Dinge' zu verwenden, die nicht frei sind. Wir möchten niemanden zwingen unfreie Produkte zu benutzen nur um diesem Buch zu folgen. Eins unserer wichtigeren Ziele ist ein Beitrag zur grossen Welt des 'Freien Denkens', der 'Libre Software' und der Zusammenarbeit.



\input{LED/S000_let-there-be-light/book.tex}
\input{LED/S002_get-me-on-get-me-off/book.tex}
\input{LED/S004_stable-decisions/book.tex}
\input{LED/S006_stable-decisions-trigger.tex}
\input{LED/S010_light-shift/book.tex}


\chapter{Time}

\input{LED/S020_instable-elements/book.tex}


\part{External devices}

\chapter{Shift Registers}

\input{Shift-Register/S000_shift-sram.tex}


\part{How to start}

\chapter{Hardware & Setup}

\input{Hardware-Setup/S000_minimal-setup.tex}


\end{document}
